(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[443],{3006:function(e,t,r){Promise.resolve().then(r.bind(r,601))},5401:function(e,t,r){"use strict";var n=r(7437),i=r(2265),a=r(9376);let l=(0,i.forwardRef)((e,t)=>{let{content:r="",onChange:l,pageIndex:s,font:o="inherit",theme:d,onFull:c,readOnly:u=!1}=e,m=(0,i.useRef)(null),[p,h]=(0,i.useState)(!1),[x,f]=(0,i.useState)(!1),w=(0,a.usePathname)();return(0,i.useImperativeHandle)(t,()=>({getContent:()=>{var e;return(null===(e=m.current)||void 0===e?void 0:e.innerHTML)||"<p></p>"}})),(0,i.useEffect)(()=>{!u&&m.current&&"/"===w&&(console.log("LetterPage: Ana sayfada i\xe7erik temizleniyor"),m.current.innerHTML="<p></p>",f(!0))},[u,w]),(0,i.useEffect)(()=>{!u&&m.current&&x&&r&&"<p></p>"!==r&&""!==r&&m.current.innerHTML!==r&&(m.current.innerHTML=r)},[r,u,x]),(0,n.jsxs)("div",{className:"w-full md:w-[420px] lg:w-[595px] h-[600px] md:h-[700px] lg:h-[842px] border-2 rounded-md relative overflow-hidden mx-auto",style:{borderColor:p?"#ef4444":"#e5e7eb",backgroundImage:d?"url(".concat(d,")"):void 0,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[u?(0,n.jsx)("div",{ref:m,className:"w-full h-full p-8 overflow-hidden outline-none whitespace-pre-wrap break-words word-break-break-word overflow-wrap-break-word relative z-10 editable-page",style:{fontSize:"16px",lineHeight:"1.5",fontFamily:o,wordBreak:"break-word",overflowWrap:"break-word"},dangerouslySetInnerHTML:{__html:r||"<p></p>"}}):(0,n.jsx)("div",{ref:m,contentEditable:!0,onBeforeInput:e=>{let t=m.current;t&&!u&&(t.scrollHeight>t.clientHeight?(h(!0),e.preventDefault(),null==c||c()):h(!1))},onInput:()=>{m.current&&!u&&l(m.current.innerHTML)},className:"w-full h-full p-8 overflow-hidden outline-none whitespace-pre-wrap break-words word-break-break-word overflow-wrap-break-word relative z-10 editable-page",suppressContentEditableWarning:!0,style:{fontSize:"16px",lineHeight:"1.5",fontFamily:o,wordBreak:"break-word",overflowWrap:"break-word"}}),p&&!u&&(0,n.jsx)("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-3 py-1 rounded-full text-sm font-medium z-20",children:"Sayfa doldu!"}),(0,n.jsx)("div",{className:"absolute top-2 right-2 bg-white/80 rounded-full w-8 h-8 flex items-center justify-center text-xs font-medium text-gray-600 z-20",children:s+1})]})});l.displayName="LetterPage",t.Z=l},601:function(e,t,r){"use strict";r.d(t,{default:function(){return d}});var n=r(7437),i=r(2265),a=r(9376),l=r(6087),s=r(7648),o=r(5401);function d(e){let{initialLetter:t,initialError:r,mektupId:d}=e,c=(0,a.useRouter)(),[u,m]=(0,i.useState)(t),[p,h]=(0,i.useState)(!1),[x,f]=(0,i.useState)(r),w=async()=>{if(d&&confirm("Bu mektubu silmek istediğinize emin misiniz?"))try{h(!0),await (0,l.Hg)(d),alert("Mektup başarıyla silindi!"),c.push("/")}catch(e){console.error("Mektup silinemedi:",e),alert("Mektup silinirken bir hata oluştu. L\xfctfen tekrar deneyin."),h(!1)}};if(p)return(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-pink-50",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"inline-block animate-bounce bg-pink-100 p-4 rounded-full mb-4",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-pink-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 19v-8.93a2 2 0 01.89-1.664l7-4.666a2 2 0 012.22 0l7 4.666A2 2 0 0121 10.07V19M3 19a2 2 0 002 2h14a2 2 0 002-2M3 19l6.75-4.5M21 19l-6.75-4.5M3 10l6.75 4.5M21 10l-6.75 4.5m0 0l-1.14.76a2 2 0 01-2.22 0l-1.14-.76"})})}),(0,n.jsx)("p",{className:"text-lg font-medium text-pink-600",children:"Mektup y\xfckleniyor..."})]})});if(x||!u)return(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-pink-50",children:(0,n.jsxs)("div",{className:"text-center bg-white p-8 rounded-lg shadow-md max-w-md",children:[(0,n.jsx)("div",{className:"inline-block bg-red-100 p-4 rounded-full mb-4",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,n.jsx)("h2",{className:"text-xl font-bold text-red-600 mb-2",children:"Mektup Bulunamadı"}),(0,n.jsx)("p",{className:"text-gray-600 mb-4",children:x||"Bu mektup bulunamadı veya silinmiş olabilir."}),(0,n.jsx)(s.default,{href:"/",className:"inline-block bg-pink-500 text-white px-4 py-2 rounded-full hover:bg-pink-600 transition-colors",children:"Ana Sayfaya D\xf6n"})]})});let g=u.from&&u.to?"burki"===u.from?"Burki'den Yenge'ye":"Yenge'den Burki'ye":u.title||"Sevgi Dolu Mektup \uD83D\uDC8C",k=u.timestamp?new Date(u.timestamp).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"";return(0,n.jsx)("div",{className:"min-h-screen bg-pink-50 py-8 px-4",children:(0,n.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,n.jsxs)("div",{className:"mb-6 flex flex-col md:flex-row justify-between items-center bg-white p-4 rounded-lg shadow-md",children:[(0,n.jsxs)("h1",{className:"text-xl md:text-2xl font-bold text-pink-600 mb-2 md:mb-0 flex items-center",children:[(0,n.jsx)("span",{className:"mr-2",children:"\uD83D\uDC8C"})," ",g]}),(0,n.jsx)("div",{className:"flex items-center space-x-2",children:(0,n.jsxs)("button",{onClick:w,className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-full text-sm flex items-center",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Mektubu Sil"]})})]}),(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[u.content&&0!==u.content.length?u.content.map((e,t)=>(0,n.jsx)("div",{className:"mb-8",children:(0,n.jsx)(o.Z,{content:e,pageIndex:t,font:u.font,theme:u.theme,readOnly:!0,onChange:()=>{}})},t)):(0,n.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md text-center",children:(0,n.jsx)("p",{className:"text-gray-500 italic",children:"Bu mektupta i\xe7erik yok."})}),k&&(0,n.jsx)("div",{className:"text-center mt-4 mb-6 text-sm text-gray-600 font-serif italic",children:k})]}),(0,n.jsx)("div",{className:"mt-6 text-center",children:(0,n.jsxs)(s.default,{href:"/",className:"inline-flex items-center bg-white text-pink-600 px-4 py-2 rounded-full shadow-md hover:bg-pink-50 transition-colors border border-pink-200",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Ana Sayfaya D\xf6n"]})})]})})}},6087:function(e,t,r){"use strict";r.d(t,{Ap:function(){return u},Hg:function(){return h},I8:function(){return c},TI:function(){return m},kC:function(){return p}});var n=r(738),i=r(7459),a=r(62),l=r(3301);let s=(0,n.ZF)({apiKey:"AIzaSyDbfqgX9NMUCVgU0_zbBJ2TQHWFKQHexl4",authDomain:"dijital-mektup.firebaseapp.com",projectId:"dijital-mektup",storageBucket:"dijital-mektup.appspot.com",messagingSenderId:"615516545800",appId:"1:615516545800:web:c17f55f6eadb129d4842bd"}),o=(0,i.ad)(s),d=(0,a.cF)(s),c=(0,l.v0)(s),u=new l.hJ,m=async e=>{try{let{theme:t,...r}=e,n=await (0,i.ET)((0,i.hJ)(o,"letters"),{...r,timestamp:e.timestamp||Date.now()}),l=t;if(t.startsWith("data:")){let e=(0,a.iH)(d,"themes/".concat(n.id,"_theme.png"));await (0,a.sf)(e,t,"data_url"),l=await (0,a.Jt)(e)}if(await (0,i.r7)((0,i.JU)(o,"letters",n.id),{theme:l}),e.imageOverlay){let t=(0,a.iH)(d,"images/".concat(n.id,"_overlay.png"));await (0,a.sf)(t,e.imageOverlay,"data_url");let r=await (0,a.Jt)(t);await (0,i.r7)((0,i.JU)(o,"letters",n.id),{imageOverlay:r})}if(e.drawings&&e.drawings.length>0){let t=await Promise.all(e.drawings.map(async(e,t)=>{let r=(0,a.iH)(d,"drawings/".concat(n.id,"_").concat(t,".png"));await (0,a.sf)(r,e.url,"data_url");let i=await (0,a.Jt)(r);return{...e,url:i}}));await (0,i.r7)((0,i.JU)(o,"letters",n.id),{drawings:t})}return n.id}catch(e){throw console.error("Mektup kaydedilemedi:",e),e}},p=async()=>{try{let e=(0,i.IO)((0,i.hJ)(o,"letters"),(0,i.Xo)("timestamp","desc"));return(await (0,i.PL)(e)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){return console.error("Mektuplar getirilemedi:",e),[]}},h=async e=>{try{return await (0,i.oe)((0,i.JU)(o,"letters",e)),!0}catch(e){throw console.error("Mektup silinemedi:",e),e}}}},function(e){e.O(0,[982,837,97,448,971,117,744],function(){return e(e.s=3006)}),_N_E=e.O()}]);