(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6264:function(e,t,r){Promise.resolve().then(r.bind(r,2044))},5401:function(e,t,r){"use strict";var n=r(7437),a=r(2265),l=r(9376);let i=(0,a.forwardRef)((e,t)=>{let{content:r="",onChange:i,pageIndex:s,font:o="inherit",theme:d,onFull:c,readOnly:u=!1}=e,m=(0,a.useRef)(null),[h,p]=(0,a.useState)(!1),[x,f]=(0,a.useState)(!1),g=(0,l.usePathname)();return(0,a.useImperativeHandle)(t,()=>({getContent:()=>{var e;return(null===(e=m.current)||void 0===e?void 0:e.innerHTML)||"<p></p>"}})),(0,a.useEffect)(()=>{!u&&m.current&&"/"===g&&(console.log("LetterPage: Ana sayfada i\xe7erik temizleniyor"),m.current.innerHTML="<p></p>",f(!0))},[u,g]),(0,a.useEffect)(()=>{!u&&m.current&&x&&r&&"<p></p>"!==r&&""!==r&&m.current.innerHTML!==r&&(m.current.innerHTML=r)},[r,u,x]),(0,n.jsxs)("div",{className:"w-full md:w-[420px] lg:w-[595px] h-[600px] md:h-[700px] lg:h-[842px] border-2 rounded-md relative overflow-hidden mx-auto",style:{borderColor:h?"#ef4444":"#e5e7eb",backgroundImage:d?"url(".concat(d,")"):void 0,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[u?(0,n.jsx)("div",{ref:m,className:"w-full h-full p-8 overflow-hidden outline-none whitespace-pre-wrap break-words word-break-break-word overflow-wrap-break-word relative z-10 editable-page",style:{fontSize:"16px",lineHeight:"1.5",fontFamily:o,wordBreak:"break-word",overflowWrap:"break-word"},dangerouslySetInnerHTML:{__html:r||"<p></p>"}}):(0,n.jsx)("div",{ref:m,contentEditable:!0,onBeforeInput:e=>{let t=m.current;t&&!u&&(t.scrollHeight>t.clientHeight?(p(!0),e.preventDefault(),null==c||c()):p(!1))},onInput:()=>{m.current&&!u&&i(m.current.innerHTML)},className:"w-full h-full p-8 overflow-hidden outline-none whitespace-pre-wrap break-words word-break-break-word overflow-wrap-break-word relative z-10 editable-page",suppressContentEditableWarning:!0,style:{fontSize:"16px",lineHeight:"1.5",fontFamily:o,wordBreak:"break-word",overflowWrap:"break-word"}}),h&&!u&&(0,n.jsx)("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-3 py-1 rounded-full text-sm font-medium z-20",children:"Sayfa doldu!"}),(0,n.jsx)("div",{className:"absolute top-2 right-2 bg-white/80 rounded-full w-8 h-8 flex items-center justify-center text-xs font-medium text-gray-600 z-20",children:s+1})]})});i.displayName="LetterPage",t.Z=i},6501:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return o},a:function(){return d}});var n=r(7437),a=r(2265),l=r(3301),i=r(6087);let s=(0,a.createContext)(void 0),o=e=>{let{children:t}=e,[r,o]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=(0,l.Aj)(i.I8,e=>{o(e)});return()=>e()},[]);let d=async()=>{await (0,l.rh)(i.I8,i.Ap)},c=async()=>{await (0,l.w7)(i.I8)};return(0,n.jsx)(s.Provider,{value:{user:r,login:d,logout:c},children:t})},d=()=>{let e=(0,a.useContext)(s);if(!e)throw Error("useAuth hook must be used inside AuthProvider");return e}},2044:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var n=r(7437),a=r(2265),l=r(5775),i=r.n(l),s=r(9376),o=r(6501);let d=a.forwardRef(function(e,t){let{title:r,titleId:n,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},l),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}),c=a.forwardRef(function(e,t){let{title:r,titleId:n,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},l),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}),u=a.forwardRef(function(e,t){let{title:r,titleId:n,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},l),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))});var m=e=>{let{currentPage:t,totalPages:r,onChangePage:a,onAddPage:l}=e;return(0,n.jsxs)("div",{className:"flex items-center space-x-2 bg-white px-4 py-2 rounded-full shadow-sm",children:[(0,n.jsx)("button",{onClick:()=>a(t-1),disabled:t<=0,className:"p-1 rounded-full ".concat(t<=0?"text-gray-300 cursor-not-allowed":"text-pink-500 hover:bg-pink-50"),children:(0,n.jsx)(d,{className:"w-5 h-5"})}),(0,n.jsxs)("span",{className:"text-sm font-medium",children:["Sayfa ",t+1," / ",r]}),(0,n.jsx)("button",{onClick:()=>a(t+1),disabled:t>=r-1&&!l,className:"p-1 rounded-full ".concat(t>=r-1&&!l?"text-gray-300 cursor-not-allowed":"text-pink-500 hover:bg-pink-50"),children:(0,n.jsx)(c,{className:"w-5 h-5"})}),l&&(0,n.jsx)("button",{onClick:l,className:"p-1 ml-1 rounded-full text-pink-500 hover:bg-pink-50 flex items-center justify-center",title:"Yeni sayfa ekle",children:(0,n.jsx)(u,{className:"w-5 h-5"})})]})},h=e=>{let{count:t=15}=e,[r,l]=(0,a.useState)([]),i=["❤️","\uD83D\uDC8C","\uD83D\uDC96","\uD83D\uDC97","\uD83D\uDC93","\uD83D\uDC98","\uD83D\uDC9D","\uD83D\uDC95"],s=["#FFB6C1","#FFC0CB","#FFD1DC","#FF69B4","#DB7093","#FF82AB","#FFA6C9","#FF85A2"];return(0,a.useEffect)(()=>{let e=[];for(let r=0;r<t;r++){let t=i[Math.floor(Math.random()*i.length)],n=s[Math.floor(Math.random()*s.length)];e.push({id:r,size:25*Math.random()+15,left:100*Math.random(),top:100*Math.random(),delay:5*Math.random(),duration:15*Math.random()+15,opacity:.5*Math.random()+.3,color:n,rotation:360*Math.random(),emoji:t})}l(e)},[t]),(0,n.jsx)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none z-0",children:r.map(e=>(0,n.jsx)("div",{className:"absolute animate-float",style:{fontSize:"".concat(e.size,"px"),left:"".concat(e.left,"%"),top:"".concat(e.top,"%"),animationDelay:"".concat(e.delay,"s"),animationDuration:"".concat(e.duration,"s"),opacity:e.opacity,transform:"translateY(0) rotate(".concat(e.rotation,"deg)"),textShadow:"0 0 5px ".concat(e.color),filter:"drop-shadow(0 0 2px rgba(255, 182, 193, 0.5))"},children:e.emoji},e.id))})},p=r(5401);let x=(0,a.forwardRef)((e,t)=>{let{theme:r,font:l,onPageChange:i,currentPage:o,totalPages:u,onTextChange:m,letters:h,onAddPage:x,stickers:f=[]}=e,g=(0,a.useRef)(null),b=(0,a.useRef)(null),k=(0,a.useRef)(null),[w,v]=(0,a.useState)(!0),j=(0,s.usePathname)();(0,a.useEffect)(()=>{w&&"/"===j&&(console.log("LetterEditor: İlk render, sayfa i\xe7eriği temizleniyor"),v(!1))},[w,j]);let y=()=>h,N=(e,t,r)=>{if(!t)return;t.innerHTML="";let n=document.createElement("div");n.style.width="100%",n.style.height="100%",n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.zIndex="9999",n.style.display="flex",n.style.justifyContent="center",n.style.alignItems="center",t.appendChild(n),window.lottie?window.lottie.loadAnimation({container:n,renderer:"svg",loop:!1,autoplay:!0,path:e}).addEventListener("complete",()=>{r&&r(),t.innerHTML=""}):(console.error("Lottie k\xfct\xfcphanesi y\xfcklenemedi!"),r&&r())},C=()=>{N("https://lottie.host/b9a7d5ae-cf4b-479c-b73a-67e698c2ac9d/LYNHLvZLcP.json",b.current)},D=e=>{N("https://lottie.host/5a5b9d64-55fe-408c-8f5c-81d2ba1e9b73/YdkDo9tLKl.json",b.current,e)};return(0,a.useImperativeHandle)(t,()=>({sendLottieAnimation:C,deleteLottieAnimation:D,getAllPageContents:y})),(0,n.jsxs)("div",{className:"relative",ref:g,children:[(0,n.jsx)("div",{ref:b,className:"absolute inset-0 z-50 pointer-events-none flex items-center justify-center"}),(0,n.jsx)("div",{className:"relative",children:(0,n.jsx)(p.Z,{content:h[o],onChange:e=>{let t=[...h];t[o]=e,m(t[o])},pageIndex:o,font:l,theme:r,onFull:()=>{console.log("Sayfa doldu: Kullanıcının yeni sayfa eklemesi veya i\xe7eriği d\xfczenlemesi gerekiyor")},ref:k},o)}),(0,n.jsxs)("div",{className:"mt-4 flex items-center justify-center space-x-4",children:[(0,n.jsx)("button",{onClick:()=>i(o-1),disabled:0===o,className:"bg-white p-2 rounded-full shadow-md disabled:opacity-50 disabled:cursor-not-allowed text-pink-600 hover:bg-pink-50 transition-colors border border-pink-200",children:(0,n.jsx)(d,{className:"w-5 h-5"})}),(0,n.jsxs)("span",{className:"text-sm font-medium text-gray-700 bg-white px-3 py-1 rounded-full shadow-sm",children:["Sayfa ",o+1," / ",u]}),(0,n.jsx)("button",{onClick:()=>i(o+1),disabled:o===u-1,className:"bg-white p-2 rounded-full shadow-md disabled:opacity-50 disabled:cursor-not-allowed text-pink-600 hover:bg-pink-50 transition-colors border border-pink-200",children:(0,n.jsx)(c,{className:"w-5 h-5"})}),(0,n.jsxs)("button",{onClick:x,className:"bg-pink-500 text-white px-4 py-2 rounded-full shadow-md hover:bg-pink-600 transition-colors flex items-center",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Yeni Sayfa"]})]}),(0,n.jsxs)("div",{className:"mt-2 text-center text-xs text-gray-500",children:["Sayfa i\xe7eriği: ",(h[o]||"").length," karakter"]})]})});x.displayName="LetterEditor";var f=r(3206),g=r(6087);i()(()=>r.e(62).then(r.bind(r,1062)),{loadableGenerated:{webpack:()=>[1062]},ssr:!1}),i()(()=>Promise.all([r.e(145),r.e(451)]).then(r.bind(r,9451)),{loadableGenerated:{webpack:()=>[9451]},ssr:!1});let b=i()(()=>Promise.all([r.e(145),r.e(302)]).then(r.bind(r,302)),{loadableGenerated:{webpack:()=>[302]},ssr:!1}),k=[{name:"Varsayılan",value:"inherit"},{name:"El Yazısı",value:"'Dancing Script', cursive"},{name:"Klasik",value:"'Playfair Display', serif"},{name:"Modern",value:"'Poppins', sans-serif"},{name:"Romantik",value:"'Pacifico', cursive"},{name:"Resmi",value:"'Roboto Slab', serif"}];function w(){let e={burki:"9DWddtzxlaWX49QKF75AQ8raBG92",yenge:"jcT79LR7A7hwE5xXxWZEk6gYf3n1"},{user:t,login:r,logout:l}=(0,o.a)(),i=(0,a.useRef)(null),[d,c]=(0,a.useState)("edit"),[u,p]=(0,a.useState)(!1),[w,v]=(0,a.useState)("/images/paper3.jpeg"),[j,y]=(0,a.useState)("inherit"),[N,C]=(0,a.useState)(0),[D,M]=(0,a.useState)([""]),[L,S]=(0,a.useState)([]),[z,P]=(0,a.useState)(!0),E=(0,a.useRef)(null),[B,H]=(0,a.useState)([]),[R,_]=(0,a.useState)([]),I=(0,s.usePathname)(),[F,A]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{P(!0),await (0,f.Of)(),P(!1)})()},[]),(0,a.useEffect)(()=>{"/"===I&&(console.log("Ana sayfa a\xe7ıldı, edit\xf6r i\xe7eriği sıfırlanıyor..."),M([""]),C(0))},[I]),(0,a.useEffect)(()=>{(async()=>{try{if(!t)return;if("edit"!==d){console.log("".concat(d," sekmesi a\xe7ıldı, mektuplar Firestore'dan y\xfckleniyor..."));let e=await (0,g.kC)();if(e&&e.length>0){let r=e.filter(e=>e.from===t.uid),n=e.filter(e=>e.to===t.uid);H(r),_(n)}else H([]),_([])}}catch(e){console.error("Mektuplar y\xfcklenirken hata oluştu:",e)}})()},[d,t]);let O=e=>{e>=0&&e<D.length&&C(e)},T=()=>{M([...D,""]),C(D.length),console.log("Yeni sayfa eklendi:",D.length+1)},Y=()=>{if(D.length<=1){M([""]),C(0);return}let e=[...D];e.splice(N,1);let t=N>=e.length?e.length-1:N;M(e),C(t)},W=e=>{v(e)},K=e=>{y(e)},G=async()=>{try{let e={content:D,theme:w,font:j,timestamp:Date.now()};await (0,g.TI)(e),alert("Mektup başarıyla kaydedildi!")}catch(e){console.error("Mektup kaydedilirken hata oluştu:",e),alert("Mektup kaydedilemedi. L\xfctfen tekrar deneyin.")}},J=async e=>{if(e){if(confirm("Bu mektubu silmek istediğinize emin misiniz?"))try{await (0,g.Hg)(e);let t=await (0,g.kC)(),r=t.filter(e=>"burki"===e.from),n=t.filter(e=>"burki"!==e.from);H(r),_(n),alert("Mektup başarıyla silindi!")}catch(e){console.error("Mektup silinemedi:",e),alert("Mektup silinirken bir hata oluştu. L\xfctfen tekrar deneyin.")}}else i.current&&i.current.deleteLottieAnimation(async()=>{M([""]),C(0),v((0,f.xt)("default")),y("inherit")})},U=async()=>{if(!t){alert("\xd6nce giriş yapmalısın!");return}let r=t.uid===e.burki?e.yenge:e.burki;try{var n;if(!D||0===D.length||D.every(e=>""===e||"<p></p>"===e)){alert("İ\xe7erik alınamadı. L\xfctfen en az bir sayfa i\xe7eriği girin.");return}let a=await (0,g.TI)({title:t.uid===e.burki?"Burki'den Yenge'ye \uD83D\uDC8C":"Yenge'den Burki'ye \uD83D\uDC8C",content:D.map(e=>e||"<p></p>"),theme:w||"/images/paper1.jpeg",font:j||"inherit",from:t.uid,to:r,timestamp:Date.now()});alert("Mektup başarıyla g\xf6nderildi!"),console.log("G\xf6nderilen mektup ID:",a);let l=await (0,g.kC)();H(l.filter(e=>e.from===t.uid)),_(l.filter(e=>e.to===t.uid)),null===(n=i.current)||void 0===n||n.sendLottieAnimation()}catch(e){console.error("HATA:",e),alert("Mesaj g\xf6nderilemedi, tekrar deneyin.")}};return z?(0,n.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-pink-50 to-pink-100 relative",children:[(0,n.jsx)(h,{count:10}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-6xl mb-4 animate-heartBeat",children:"✉️"}),(0,n.jsx)("h2",{className:"text-2xl font-bold text-pink-500 mb-4",children:"Mektup Uygulaması Y\xfckleniyor"}),(0,n.jsx)("div",{className:"relative w-64 h-4 bg-pink-100 rounded-full overflow-hidden",children:(0,n.jsx)("div",{className:"absolute top-0 left-0 h-full bg-pink-400 animate-pulse rounded-full w-full"})})]})]}):(0,n.jsxs)("div",{className:"min-h-screen bg-heart-pattern bg-pink-50 relative",children:[(0,n.jsx)(h,{count:20}),(0,n.jsx)("header",{className:"bg-white shadow-sm py-3 mb-6 relative z-10",children:(0,n.jsxs)("div",{className:"container mx-auto px-4 flex justify-between items-center",children:[(0,n.jsxs)("h1",{className:"text-2xl font-bold text-pink-500 flex items-center",children:[(0,n.jsx)("span",{className:"mr-2 animate-heartBeat",children:"✉️"})," Mektup Uygulaması"]}),t?(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("span",{className:"text-gray-700 text-sm",children:["Hoş geldin, ",t.displayName||"Kullanıcı","!"]}),(0,n.jsx)("button",{onClick:l,className:"text-sm text-red-500 hover:underline",children:"\xc7ıkış Yap"})]}):(0,n.jsx)("button",{onClick:r,className:"text-sm text-blue-500 hover:underline",children:"Giriş Yap"}),(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsxs)("div",{className:"flex rounded-md overflow-hidden shadow-sm",children:[(0,n.jsx)("button",{className:"px-4 py-2 ".concat("edit"===d?"bg-pink-500 text-white":"bg-white text-gray-700 hover:bg-pink-50"," transition-colors focus:outline-none"),onClick:()=>c("edit"),children:"Edit\xf6r"}),(0,n.jsx)("button",{className:"px-4 py-2 ".concat("sent"===d?"bg-pink-500 text-white":"bg-white text-gray-700 hover:bg-pink-50"," transition-colors focus:outline-none"),onClick:()=>c("sent"),children:"G\xf6nderdiğim"}),(0,n.jsx)("button",{className:"px-4 py-2 ".concat("received"===d?"bg-pink-500 text-white":"bg-white text-gray-700 hover:bg-pink-50"," transition-colors focus:outline-none"),onClick:()=>c("received"),children:"Gelen"}),(0,n.jsx)("button",{className:"px-4 py-2 ".concat("drafts"===d?"bg-pink-500 text-white":"bg-white text-gray-700 hover:bg-pink-50"," transition-colors focus:outline-none"),onClick:()=>c("drafts"),children:"Taslaklar"})]}),(0,n.jsx)("div",{className:"ml-4",children:t?(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("span",{className:"text-sm text-gray-600",children:["\uD83D\uDC64 ",t.displayName||"Kullanıcı"]}),(0,n.jsx)("button",{onClick:l,className:"bg-pink-100 hover:bg-pink-200 text-pink-600 text-sm px-3 py-1 rounded-full transition-colors border border-pink-300",children:"\xc7ıkış Yap"})]}):(0,n.jsx)("button",{onClick:r,className:"bg-pink-500 hover:bg-pink-600 text-white text-sm px-4 py-2 rounded-full transition-colors",children:"Giriş Yap"})})]})]})}),(0,n.jsx)("div",{className:"container mx-auto px-4",children:"edit"===d?(0,n.jsx)("div",{className:"relative",children:(0,n.jsxs)("div",{className:"flex flex-col items-center relative",children:[(0,n.jsx)("div",{className:"flex justify-center w-full mb-4",children:(0,n.jsx)(m,{currentPage:N,totalPages:D.length,onChangePage:O,onAddPage:T})}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(x,{ref:i,theme:w,font:j,onPageChange:O,currentPage:N,totalPages:D.length,onTextChange:e=>{let t=[...D];t[N]=e,M(t)},letters:D,onAddPage:T,stickers:[]}),(0,n.jsx)("div",{className:"absolute -top-2 -left-2 z-20 flex space-x-2",children:(0,n.jsx)("button",{className:"w-10 h-10 flex items-center justify-center rounded-full shadow-md transition-colors ".concat(u?"bg-pink-500 text-white":"bg-white text-pink-500 hover:bg-pink-100"),onClick:()=>p(!u),title:"Mektup \xf6zelleştir",children:(0,n.jsx)("span",{className:"text-lg",children:"\uD83C\uDFA8"})})}),(0,n.jsx)("button",{className:"absolute -bottom-2 -left-2 z-20 flex items-center justify-center bg-red-500 text-white w-12 h-12 rounded-full shadow-md hover:bg-red-600 transition-colors",onClick:Y,title:"Sayfayı sil",children:(0,n.jsx)("span",{className:"text-xl",children:"\uD83D\uDDD1️"})}),(0,n.jsx)("button",{className:"absolute -bottom-2 -right-2 z-20 flex items-center justify-center bg-green-500 text-white w-12 h-12 rounded-full shadow-md hover:bg-green-600 transition-colors",onClick:G,title:"Mektubu g\xf6nder",children:(0,n.jsx)("span",{className:"text-xl",children:"\uD83D\uDCE8"})})]})]})}):"sent"===d?(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,n.jsxs)("h2",{className:"text-2xl font-bold text-pink-600 mb-6 flex items-center",children:[(0,n.jsx)("span",{className:"mr-2",children:"\uD83D\uDCE4"})," G\xf6nderdiğim Mektuplar"]}),0===B.length?(0,n.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,n.jsx)("p",{className:"text-lg",children:"Hen\xfcz g\xf6nderdiğin mektup yok."}),(0,n.jsx)("p",{className:"mt-2",children:"Yeni bir mektup yazıp g\xf6nderebilirsin! \uD83D\uDC8C"})]}):(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:B.map(e=>(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("a",{href:"/mektup/".concat(e.id),className:"block group",children:(0,n.jsx)("div",{className:"h-48 border border-pink-200 rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-all duration-300 transform group-hover:scale-105 group-hover:-rotate-1 relative",style:{backgroundImage:"url(".concat(e.theme,")"),backgroundSize:"cover",backgroundPosition:"center"},children:(0,n.jsxs)("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm p-4 flex flex-col",children:[(0,n.jsx)("h3",{className:"font-medium text-lg text-pink-600 mb-2",children:e.title||"Yenge'ye Mektup \uD83D\uDC8C"}),(0,n.jsx)("p",{className:"text-gray-600 line-clamp-2 text-sm mb-2",children:e.content&&e.content[0]?e.content[0].replace(/<[^>]*>/g,"").slice(0,80)+"...":"Mektup i\xe7eriği yok..."}),(0,n.jsx)("div",{className:"mt-auto text-xs text-gray-500",children:new Date(e.timestamp).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}),(0,n.jsx)("div",{className:"absolute top-2 right-2 bg-pink-500 text-white text-xs px-2 py-1 rounded-full",children:"G\xf6nderildi"})]})})}),(0,n.jsx)("button",{onClick:()=>J(e.id),className:"absolute bottom-2 right-2 z-20 bg-red-500 text-white p-1 rounded-full shadow-sm hover:bg-red-600 transition-colors",title:"Bu mektubu sil",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},e.id))})]}):"received"===d?(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,n.jsxs)("h2",{className:"text-2xl font-bold text-pink-600 mb-6 flex items-center",children:[(0,n.jsx)("span",{className:"mr-2",children:"\uD83D\uDCE9"})," Gelen Mektuplar"]}),0===R.length?(0,n.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,n.jsx)("p",{className:"text-lg",children:"Hen\xfcz gelen mektup yok."}),(0,n.jsx)("p",{className:"mt-2",children:"Sana mektup geldiğinde burada g\xf6r\xfcnecek! \uD83D\uDC8C"})]}):(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:R.map(e=>(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("a",{href:"/mektup/".concat(e.id),className:"block group",children:(0,n.jsx)("div",{className:"h-48 border border-pink-200 rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-all duration-300 transform group-hover:scale-105 group-hover:rotate-1 relative",style:{backgroundImage:"url(".concat(e.theme,")"),backgroundSize:"cover",backgroundPosition:"center"},children:(0,n.jsxs)("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm p-4 flex flex-col",children:[(0,n.jsx)("h3",{className:"font-medium text-lg text-pink-600 mb-2",children:e.title||"Yenge'den Mektup \uD83D\uDC8C"}),(0,n.jsx)("p",{className:"text-gray-600 line-clamp-2 text-sm mb-2",children:e.content&&e.content[0]?e.content[0].replace(/<[^>]*>/g,"").slice(0,80)+"...":"Mektup i\xe7eriği yok..."}),(0,n.jsx)("div",{className:"mt-auto text-xs text-gray-500",children:new Date(e.timestamp).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}),(0,n.jsx)("div",{className:"absolute top-2 right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full",children:"Yeni"})]})})}),(0,n.jsx)("button",{onClick:()=>J(e.id),className:"absolute bottom-2 right-2 z-20 bg-red-500 text-white p-1 rounded-full shadow-sm hover:bg-red-600 transition-colors",title:"Bu mektubu sil",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},e.id))})]}):(0,n.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:(0,n.jsx)(b,{drafts:L,onDraftSelect:e=>{let t=L.find(t=>t.id===e);t&&(M(t.pages.map(e=>e.content)),v(t.theme),C(0),c("edit"))}})})}),u&&(0,n.jsx)("div",{className:"mt-6 w-full max-w-md mx-auto absolute z-50 top-20 left-1/2 transform -translate-x-1/2",children:(0,n.jsx)("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden border border-pink-100",children:(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsxs)("h3",{className:"text-lg font-medium text-gray-800 mb-2 flex justify-between items-center",children:[(0,n.jsx)("span",{children:"Mektup \xd6zelleştir"}),(0,n.jsx)("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"border-b border-gray-100 pb-4",children:[(0,n.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Yazı Fontu"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:k.map(e=>(0,n.jsx)("button",{onClick:()=>K(e.value),className:"px-3 py-2 rounded text-sm ".concat(j===e.value?"bg-pink-100 text-pink-800 border border-pink-300":"bg-gray-50 hover:bg-gray-100 text-gray-700"),style:{fontFamily:e.value},children:e.name},e.value))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Mektup Kağıdı"}),(0,n.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,n.jsx)("button",{className:"h-16 border-2 rounded overflow-hidden ".concat("/images/paper1.jpeg"===w?"border-pink-500":"border-transparent"),onClick:()=>W("/images/paper1.jpeg"),children:(0,n.jsx)("img",{src:"/images/paper1.jpeg",alt:"Kağıt 1",className:"w-full h-full object-cover"})}),(0,n.jsx)("button",{className:"h-16 border-2 rounded overflow-hidden ".concat("/images/paper2.jpeg"===w?"border-pink-500":"border-transparent"),onClick:()=>W("/images/paper2.jpeg"),children:(0,n.jsx)("img",{src:"/images/paper2.jpeg",alt:"Kağıt 2",className:"w-full h-full object-cover"})}),(0,n.jsx)("button",{className:"h-16 border-2 rounded overflow-hidden ".concat("/images/paper3.jpeg"===w?"border-pink-500":"border-transparent"),onClick:()=>W("/images/paper3.jpeg"),children:(0,n.jsx)("img",{src:"/images/paper3.jpeg",alt:"Kağıt 3",className:"w-full h-full object-cover"})})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Kendi Kağıdını Y\xfckle"}),(0,n.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,n.jsx)("input",{type:"file",accept:"image/*",className:"hidden",ref:E,onChange:e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!r)return;let n=new FileReader;n.onload=e=>{var t;(null===(t=e.target)||void 0===t?void 0:t.result)&&(v(e.target.result.toString()),p(!1))},n.readAsDataURL(r)}}),(0,n.jsxs)("button",{onClick:()=>{var e;return null===(e=E.current)||void 0===e?void 0:e.click()},className:"w-full py-2 px-4 bg-pink-100 hover:bg-pink-200 text-pink-800 rounded-md text-sm font-medium transition-colors flex items-center justify-center",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0l-4 4m4-4v12"})}),"Resim Y\xfckle"]})]})]})]})]})})}),(0,n.jsx)("button",{onClick:()=>p(!u),className:"fixed bottom-4 right-4 z-50 bg-white p-3 rounded-full shadow-lg hover:bg-pink-50 transition-colors border border-pink-200",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-pink-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,n.jsxs)("div",{className:"fixed bottom-0 left-0 right-0 p-4 flex justify-between items-center bg-white/80 backdrop-blur-sm border-t border-pink-100 z-40",children:[(0,n.jsxs)("button",{onClick:Y,className:"bg-white text-pink-600 px-4 py-2 rounded-full flex items-center gap-2 shadow-md hover:bg-pink-50 transition-colors border border-pink-200",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Sil"]}),(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsxs)("button",{onClick:G,className:"bg-white text-pink-600 px-4 py-2 rounded-full flex items-center gap-2 shadow-md hover:bg-pink-50 transition-colors border border-pink-200",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),"Kaydet"]}),(0,n.jsxs)("button",{onClick:U,className:"bg-gradient-to-r from-pink-500 to-pink-600 text-white px-6 py-2 rounded-full flex items-center gap-2 shadow-md hover:from-pink-600 hover:to-pink-700 transition-colors",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),"G\xf6nder"]})]})]})]})}},3206:function(e,t,r){"use strict";r.d(t,{Of:function(){return l},gd:function(){return i},tH:function(){return s},xt:function(){return o}});let n="letter-app-custom-themes",a=()=>({"paper1.jpeg":"/images/paper3.jpeg","paper2.jpeg":"/images/paper2.jpeg","paper3.jpeg":"/images/paper3.jpeg"}),l=async()=>{try{let e=a();for(let[t,r]of Object.entries(e))localStorage.setItem("theme_".concat(t,"_exists"),"true");return!0}catch(e){console.error("Tema dosyaları kaydedilemedi:",e)}return!1},i=()=>{let e=localStorage.getItem(n);if(!e)return[];try{return JSON.parse(e)}catch(e){return console.error("\xd6zel tema verileri alınamadı:",e),[]}},s=(e,t)=>{let r=i(),a={id:"custom-".concat(Date.now()),name:e,url:t,dateCreated:new Date().toISOString()};return r.push(a),localStorage.setItem(n,JSON.stringify(r)),a},o=e=>{if(e.startsWith("custom-")){let t=i().find(t=>t.id===e);return(null==t?void 0:t.url)||"/images/paper3.jpeg"}return a()[e]||"/images/paper3.jpeg"}},6087:function(e,t,r){"use strict";r.d(t,{Ap:function(){return u},Hg:function(){return p},I8:function(){return c},TI:function(){return m},kC:function(){return h}});var n=r(738),a=r(7459),l=r(62),i=r(3301);let s=(0,n.ZF)({apiKey:"AIzaSyDbfqgX9NMUCVgU0_zbBJ2TQHWFKQHexl4",authDomain:"dijital-mektup.firebaseapp.com",projectId:"dijital-mektup",storageBucket:"dijital-mektup.appspot.com",messagingSenderId:"615516545800",appId:"1:615516545800:web:c17f55f6eadb129d4842bd"}),o=(0,a.ad)(s),d=(0,l.cF)(s),c=(0,i.v0)(s),u=new i.hJ,m=async e=>{try{let{theme:t,...r}=e,n=await (0,a.ET)((0,a.hJ)(o,"letters"),{...r,timestamp:e.timestamp||Date.now()}),i=t;if(t.startsWith("data:")){let e=(0,l.iH)(d,"themes/".concat(n.id,"_theme.png"));await (0,l.sf)(e,t,"data_url"),i=await (0,l.Jt)(e)}if(await (0,a.r7)((0,a.JU)(o,"letters",n.id),{theme:i}),e.imageOverlay){let t=(0,l.iH)(d,"images/".concat(n.id,"_overlay.png"));await (0,l.sf)(t,e.imageOverlay,"data_url");let r=await (0,l.Jt)(t);await (0,a.r7)((0,a.JU)(o,"letters",n.id),{imageOverlay:r})}if(e.drawings&&e.drawings.length>0){let t=await Promise.all(e.drawings.map(async(e,t)=>{let r=(0,l.iH)(d,"drawings/".concat(n.id,"_").concat(t,".png"));await (0,l.sf)(r,e.url,"data_url");let a=await (0,l.Jt)(r);return{...e,url:a}}));await (0,a.r7)((0,a.JU)(o,"letters",n.id),{drawings:t})}return n.id}catch(e){throw console.error("Mektup kaydedilemedi:",e),e}},h=async()=>{try{let e=(0,a.IO)((0,a.hJ)(o,"letters"),(0,a.Xo)("timestamp","desc"));return(await (0,a.PL)(e)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){return console.error("Mektuplar getirilemedi:",e),[]}},p=async e=>{try{return await (0,a.oe)((0,a.JU)(o,"letters",e)),!0}catch(e){throw console.error("Mektup silinemedi:",e),e}}},9376:function(e,t,r){"use strict";var n=r(5475);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},5775:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let n=r(7043);r(7437),r(2265);let a=n._(r(5602));function l(e,t){var r;let n={loading:e=>{let{error:t,isLoading:r,pastDelay:n}=e;return null}};"function"==typeof e&&(n.loader=e);let l={...n,...t};return(0,a.default)({...l,modules:null==(r=l.loadableGenerated)?void 0:r.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1523:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let n=r(8993);function a(e){let{reason:t,children:r}=e;if("undefined"==typeof window)throw new n.BailoutToCSRError(t);return r}},5602:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let n=r(7437),a=r(2265),l=r(1523),i=r(49);function s(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(s(()=>null)),loading:null,ssr:!0},d=function(e){let t={...o,...e},r=(0,a.lazy)(()=>t.loader().then(s)),d=t.loading;function c(e){let s=d?(0,n.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,o=t.ssr?(0,n.jsxs)(n.Fragment,{children:["undefined"==typeof window?(0,n.jsx)(i.PreloadCss,{moduleIds:t.modules}):null,(0,n.jsx)(r,{...e})]}):(0,n.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,n.jsx)(r,{...e})});return(0,n.jsx)(a.Suspense,{fallback:s,children:o})}return c.displayName="LoadableComponent",c}},49:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return l}});let n=r(7437),a=r(544);function l(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let r=(0,a.getExpectedRequestStore)("next/dynamic css"),l=[];if(r.reactLoadableManifest&&t){let e=r.reactLoadableManifest;for(let r of t){if(!e[r])continue;let t=e[r].files.filter(e=>e.endsWith(".css"));l.push(...t)}}return 0===l.length?null:(0,n.jsx)(n.Fragment,{children:l.map(e=>(0,n.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:r.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}}},function(e){e.O(0,[982,837,97,971,117,744],function(){return e(e.s=6264)}),_N_E=e.O()}]);